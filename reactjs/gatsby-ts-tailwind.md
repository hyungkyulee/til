# Gatsby website project with Typescript and Tailwind CSS

## Dev Environment

### Gatsby Cli
```
npm i -g gatsby-cli
```

### templated project
Gatsby + Typescript + Tailwind CSS + Jest
```
// create a new Gatsby site using gatsby-typescript-tailwind-starter
gatsby new my-tswind-starter https://github.com/jagdcake/gatsby-typescript-tailwind-starter

cd [project folder]
gatsby develop
```
> open the website on localhost:8080 as a default

### manually build up typescript and other packages
#### Gastby init project (javascript)
```
// -- package.json
...
"scripts": {
    "develop": "gatsby develop",
    "start": "gatsby develop",
    "build": "gatsby build",
    "serve": "gatsby serve",
    "clean": "gatsby clean"
  },
  "dependencies": {
    "gatsby": "^3.14.2",
    "gatsby-plugin-google-analytics": "^3.14.0",
    "gatsby-plugin-sitemap": "^4.10.0",
    "react": "^17.0.1",
    "react-dom": "^17.0.1"
  }
```

#### clean a project
- clean gatsby
```
$ gatsby clean                                                                              ✔  16s  12:06:08 
info Deleting .cache, public, /Users/kyu/dev/sekyee/sekyee-website/node_modules/.cache/babel-loader,
/Users/kyu/dev/sekyee/sekyee-website/node_modules/.cache/terser-webpack-plugin
info Successfully deleted directories

Hello! Will you help Gatsby improve by taking a four question survey?
It takes less than five minutes and your ideas and feedback will be very helpful.

Give us your feedback here: https://gatsby.dev/feedback
```

- if there is a set of below files, remove them
```
rm gatsby-node.js
rm gatsby-browser.js
rm gatsby-ssr.js
```

- remove node_modules

#### installing a set of initial dependencies for typescript
- Install Typescript, typings for React/Node, ESLint (and default config + prettier integration), and finally the Gatsby plugin for Typescript support:
> some of the dependencies might be pre-installed on starter project of gatsby
```
npm i typescript gatsby-plugin-typescript
npx install-peerdeps --dev eslint-config-airbnb
// if necessary, please install more eslint dependencies for eslint-config-airbnb
npm install --save-dev @types/react @types/react-dom @types/node eslint eslint-config-prettier eslint-plugin-prettier
```

- update gatsby-config to enable typescript plugin
```
...
plugins: [
    {
      resolve: "gatsby-plugin-google-analytics",
      options: {
        ...
      },
    },
    ...
    `gatsby-plugin-typescript`
  ],
```

- update package.json
```
...
"scripts": {
    ...
    "lint": "eslint . --ext ts --ext tsx'",
    "test": "npm run type-check && npm run lint",
    "type-check": "tsc --pretty --noEmit"
  },
```

#### Tailwind CSS setup
> ref: https://www.gatsbyjs.com/docs/how-to/styling/tailwind-css/

- Tailwind CSS overview
a utility-first CSS framework for rapidly building custom user interfaces.

- three ways to use tailwind css in Gatsby project
  - PostCSS : to use 'className'
  - CSS in JS : to integrate Tailwind classes into Styled Components
  - SCSS : to support Tailwind classes in your SCSS files

- pre-requisit
```
npm install tailwindcss autoprefixer
npx tailwindcss init

// tailwind.config.js (* generated by npx tailwindcss init)
module.exports = {
  purge: [],
  darkMode: false, // or 'media' or 'class'
  theme: {
    extend: {},
  },
  variants: {},
  plugins: [],
}
```
> Since Tailwind does not automatically add vendor prefixes to the CSS it generates, we recommend installing autoprefixer to handle this
> tailwindcss has a build-in script(npx ... init) to create a tailwind config file.
> If you’d like to customize your Tailwind installation, generate a config file

- PostCSS setup
```
// install package
npm install postcss gatsby-plugin-postcss

// add plugin into [gatsby-config.js]
...
plugins: [`gatsby-plugin-postcss`],

// Create a [postcss.config.js], and link plugin
module.exports = {
  plugins: [
    require('tailwindcss'),
    require('autoprefixer'),
  ]
}

// create a CSS file [style.css]
@tailwind base;
@tailwind components;
@tailwind utilities;

// optimise a build on dev and production via [tailwind.config.js]
 module.exports = {
 purge: [
    './src/**/*.html',
    './src/**/*.js',
  ],
  darkMode: false, // or 'media' or 'class'
  theme: {
    extend: {},
  },
  variants: {},
  plugins: [],
}

```
> we can use ```@tailwind``` to use utilities, preflight, and functions; and ```@apply```
> if tailwindcss cannot be found on typescript, ```npm i --save-dev @types/tailwindcss```
> @tailwind directive to inject Tailwind’s base, components, and utilities styles -> ailwind will swap these directives out at build-time with all of the styles
  - if you're using 'postcss-import', use @import instead of @tailwind 
    ```
    @import "tailwindcss/base";
    @import "tailwindcss/components";
    @import "tailwindcss/utilities";
    ```
  - if you're working in a js framework like react or vue, you can import 'tailwindcss/tailwind.css' instead of creating CSS file ```import "tailwindcss/tailwind.css"```
> When building for production, be sure to configure the purge option to remove any unused classes for the smallest file size

- CSS in JS setup
- SCSS setup
